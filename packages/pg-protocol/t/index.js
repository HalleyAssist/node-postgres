"use strict";process.env.NODE_ENV="production";let __r=function(e){if(void 0!==__r.c[e])return __r.c[e];if(!__r.C[e])throw new Error(`Unknown require ${e}`);const t=Object.assign({},module,{exports:{}}),s=__r.C[e];__r.C[e]=null,__r.c[e]=t.exports;try{s(t,t.exports)}catch(t){throw __r.c[e]=null,t}return __r.c[e]=t.exports};__r.c=[],__r.C=[],__r.cnt=0,require("@serialport/loader");const cFn=function(){if(120>__r.cnt++)return setTimeout(cFn,1e3);__r.C=__r.c=__r=null;const e=require("module")._loadClear;e&&e()};setTimeout(cFn,1e3),__r.C[1]=(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.NoticeMessage=t.DataRowMessage=t.CommandCompleteMessage=t.ReadyForQueryMessage=t.NotificationResponseMessage=t.BackendKeyDataMessage=t.AuthenticationMD5Password=t.ParameterStatusMessage=t.ParameterDescriptionMessage=t.RowDescriptionMessage=t.Field=t.CopyResponse=t.CopyDataMessage=t.DatabaseError=t.copyDone=t.emptyQuery=t.replicationStart=t.portalSuspended=t.noData=t.closeComplete=t.bindComplete=t.parseComplete=void 0,t.parseComplete={name:"parseComplete",length:5},t.bindComplete={name:"bindComplete",length:5},t.closeComplete={name:"closeComplete",length:5},t.noData={name:"noData",length:5},t.portalSuspended={name:"portalSuspended",length:5},t.replicationStart={name:"replicationStart",length:4},t.emptyQuery={name:"emptyQuery",length:4},t.copyDone={name:"copyDone",length:4};class DatabaseError extends Error{constructor(e,t,s){super(e),this.length=t,this.name=s}}t.DatabaseError=DatabaseError,t.CopyDataMessage=class CopyDataMessage{constructor(e,t){this.length=e,this.chunk=t,this.name="copyData"}},t.CopyResponse=class CopyResponse{constructor(e,t,s,r){this.length=e,this.name=t,this.binary=s,this.columnTypes=Array(r)}},t.Field=class Field{constructor(e,t,s,r,a,n,i){this.name=e,this.tableID=t,this.columnID=s,this.dataTypeID=r,this.dataTypeSize=a,this.dataTypeModifier=n,this.format=i}},t.RowDescriptionMessage=class RowDescriptionMessage{constructor(e,t){this.length=e,this.fieldCount=t,this.name="rowDescription",this.fields=Array(this.fieldCount)}},t.ParameterDescriptionMessage=class ParameterDescriptionMessage{constructor(e,t){this.length=e,this.parameterCount=t,this.name="parameterDescription",this.dataTypeIDs=Array(this.parameterCount)}},t.ParameterStatusMessage=class ParameterStatusMessage{constructor(e,t,s){this.length=e,this.parameterName=t,this.parameterValue=s,this.name="parameterStatus"}},t.AuthenticationMD5Password=class AuthenticationMD5Password{constructor(e,t){this.length=e,this.salt=t,this.name="authenticationMD5Password"}},t.BackendKeyDataMessage=class BackendKeyDataMessage{constructor(e,t,s){this.length=e,this.processID=t,this.secretKey=s,this.name="backendKeyData"}},t.NotificationResponseMessage=class NotificationResponseMessage{constructor(e,t,s,r){this.length=e,this.processId=t,this.channel=s,this.payload=r,this.name="notification"}},t.ReadyForQueryMessage=class ReadyForQueryMessage{constructor(e,t){this.length=e,this.status=t,this.name="readyForQuery"}},t.CommandCompleteMessage=class CommandCompleteMessage{constructor(e,t){this.length=e,this.text=t,this.name="commandComplete"}},t.DataRowMessage=class DataRowMessage{constructor(e,t){this.length=e,this.fields=t,this.name="dataRow",this.fieldCount=t.length}},t.NoticeMessage=class NoticeMessage{constructor(e,t){this.length=e,this.message=t,this.name="notice"}},e.exports=t},__r.C[4]=(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.BufferReader=void 0;const s=Buffer.allocUnsafeSlow(0);t.BufferReader=class BufferReader{constructor(e=0){this.offset=e,this.buffer=s,this.encoding="utf-8"}setBuffer(e,t){this.offset=e,this.buffer=t}int16(){const e=this.buffer.readInt16BE(this.offset);return this.offset+=2,e}byte(){const e=this.buffer[this.offset];return this.offset++,e}int32(){const e=this.buffer.readInt32BE(this.offset);return this.offset+=4,e}string(e){const t=this.buffer.toString(this.encoding,this.offset,this.offset+e);return this.offset+=e,t}cstring(){const e=this.offset;let t=e;for(;0!==this.buffer[t++];);return this.offset=t,this.buffer.toString(this.encoding,e,t-1)}bytes(e){const t=this.buffer.slice(this.offset,this.offset+e);return this.offset+=e,t}},e.exports=t},__r.C[3]=(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Parser=void 0;const s=__r(1),r=__r(4);t.Parser=class Parser{constructor(e){if(this.buffer=Buffer.allocUnsafe(4096),this.bufferLength=0,this.bufferOffset=0,this.reader=new r.BufferReader,"binary"===(null==e?void 0:e.mode))throw new Error("Binary mode not supported yet");this.mode=(null==e?void 0:e.mode)||"text"}parse(e,t){this.mergeBuffer(e);const s=this.bufferLength;let r=this.bufferOffset;for(;r<=s-5;){const e=this.buffer.readUInt32BE(r+1),a=1+e;if(a+r>s)break;t(this.handlePacket(r+5,this.buffer[r],e)),r+=a}r===s?(this.bufferLength=0,this.bufferOffset=0,32768<this.buffer.length&&(this.buffer=Buffer.allocUnsafe(4096))):this.bufferOffset=r}mergeBuffer(e){if(this.bufferLength+e.length>this.buffer.length){const t=this.bufferLength-this.bufferOffset;let s=t+e.length+2048;s=-2048&s+2047;const r=Buffer.allocUnsafe(s);0<t&&this.buffer.copy(r,0,this.bufferOffset,this.bufferOffset+t),this.buffer=r,this.bufferOffset=0,this.bufferLength=t}e.copy(this.buffer,this.bufferLength),this.bufferLength+=e.length}handlePacket(e,t,r){switch(t){case 50:return s.bindComplete;case 49:return s.parseComplete;case 51:return s.closeComplete;case 110:return s.noData;case 115:return s.portalSuspended;case 99:return s.copyDone;case 87:return s.replicationStart;case 73:return s.emptyQuery;case 68:return this.parseDataRowMessage(e,r,this.buffer);case 67:return this.parseCommandCompleteMessage(e,r,this.buffer);case 90:return this.parseReadyForQueryMessage(e,r,this.buffer);case 65:return this.parseNotificationMessage(e,r,this.buffer);case 82:return this.parseAuthenticationResponse(e,r,this.buffer);case 83:return this.parseParameterStatusMessage(e,r,this.buffer);case 75:return this.parseBackendKeyData(e,r,this.buffer);case 69:return this.parseErrorMessage(e,r,this.buffer,"error");case 78:return this.parseErrorMessage(e,r,this.buffer,"notice");case 84:return this.parseRowDescriptionMessage(e,r,this.buffer);case 116:return this.parseParameterDescriptionMessage(e,r,this.buffer);case 71:return this.parseCopyInMessage(e,r,this.buffer);case 72:return this.parseCopyOutMessage(e,r,this.buffer);case 100:return this.parseCopyData(e,r,this.buffer);default:return new s.DatabaseError("received invalid response: "+t.toString(16),r,"error")}}parseReadyForQueryMessage(e,t,r){this.reader.setBuffer(e,r);const a=this.reader.string(1);return new s.ReadyForQueryMessage(t,a)}parseCommandCompleteMessage(e,t,r){this.reader.setBuffer(e,r);const a=this.reader.cstring();return new s.CommandCompleteMessage(t,a)}parseCopyData(e,t,r){const a=r.slice(e,e+(t-4));return new s.CopyDataMessage(t,a)}parseCopyInMessage(e,t,s){return this.parseCopyMessage(e,t,s,"copyInResponse")}parseCopyOutMessage(e,t,s){return this.parseCopyMessage(e,t,s,"copyOutResponse")}parseCopyMessage(e,t,r,a){this.reader.setBuffer(e,r);const n=0!==this.reader.byte(),i=this.reader.int16(),o=new s.CopyResponse(t,a,n,i);for(let e=0;e<i;e++)o.columnTypes[e]=this.reader.int16();return o}parseNotificationMessage(e,t,r){this.reader.setBuffer(e,r);const a=this.reader.int32(),n=this.reader.cstring(),i=this.reader.cstring();return new s.NotificationResponseMessage(t,a,n,i)}parseRowDescriptionMessage(e,t,r){this.reader.setBuffer(e,r);const a=this.reader.int16(),n=new s.RowDescriptionMessage(t,a);for(let e=0;e<a;e++)n.fields[e]=this.parseField();return n}parseField(){const e=this.reader.cstring(),t=this.reader.int32(),r=this.reader.int16(),a=this.reader.int32(),n=this.reader.int16(),i=this.reader.int32(),o=0===this.reader.int16()?"text":"binary";return new s.Field(e,t,r,a,n,i,o)}parseParameterDescriptionMessage(e,t,r){this.reader.setBuffer(e,r);const a=this.reader.int16(),n=new s.ParameterDescriptionMessage(t,a);for(let e=0;e<a;e++)n.dataTypeIDs[e]=this.reader.int32();return n}parseDataRowMessage(e,t,r){this.reader.setBuffer(e,r);const a=this.reader.int16(),n=Array(a);for(let e=0;e<a;e++){const t=this.reader.int32();n[e]=-1===t?null:this.reader.string(t)}return new s.DataRowMessage(t,n)}parseParameterStatusMessage(e,t,r){this.reader.setBuffer(e,r);const a=this.reader.cstring(),n=this.reader.cstring();return new s.ParameterStatusMessage(t,a,n)}parseBackendKeyData(e,t,r){this.reader.setBuffer(e,r);const a=this.reader.int32(),n=this.reader.int32();return new s.BackendKeyDataMessage(t,a,n)}parseAuthenticationResponse(e,t,r){this.reader.setBuffer(e,r);const a=this.reader.int32(),n={name:"authenticationOk",length:t};switch(a){case 0:break;case 3:8===n.length&&(n.name="authenticationCleartextPassword");break;case 5:if(12===n.length){n.name="authenticationMD5Password";const e=this.reader.bytes(4);return new s.AuthenticationMD5Password(t,e)}break;case 10:let e;n.name="authenticationSASL",n.mechanisms=[];do{e=this.reader.cstring(),e&&n.mechanisms.push(e)}while(e);break;case 11:n.name="authenticationSASLContinue",n.data=this.reader.string(t-8);break;case 12:n.name="authenticationSASLFinal",n.data=this.reader.string(t-8);break;default:throw new Error("Unknown authenticationOk message type "+a)}return n}parseErrorMessage(e,t,r,a){this.reader.setBuffer(e,r);const n={};let i=this.reader.string(1);for(;"\0"!==i;)n[i]=this.reader.cstring(),i=this.reader.string(1);const o=n.M,f="notice"===a?new s.NoticeMessage(t,o):new s.DatabaseError(o,t,a);return f.severity=n.S,f.code=n.C,f.detail=n.D,f.hint=n.H,f.position=n.P,f.internalPosition=n.p,f.internalQuery=n.q,f.where=n.W,f.schema=n.s,f.table=n.t,f.column=n.c,f.dataType=n.d,f.constraint=n.n,f.file=n.F,f.line=n.L,f.routine=n.R,f}},e.exports=t},__r.C[5]=(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Writer=void 0,t.Writer=class Writer{constructor(e=512){this.size=e,this.offset=5,this.buffer=Buffer.allocUnsafeSlow(e)}ensure(e){if(this.buffer.length-this.offset<e){let t=this.buffer,s=t.length+(t.length>>1)+e;this.buffer=Buffer.allocUnsafeSlow(s),t.copy(this.buffer)}}addInt32(e){return this.ensure(4),this.buffer[this.offset++]=255&e>>>24,this.buffer[this.offset++]=255&e>>>16,this.buffer[this.offset++]=255&e>>>8,this.buffer[this.offset++]=255&e>>>0,this}addInt16(e){return this.ensure(2),this.buffer[this.offset++]=255&e>>>8,this.buffer[this.offset++]=255&e>>>0,this}addCString(e){if(e){let t=Buffer.byteLength(e);this.ensure(t+1),this.buffer.write(e,this.offset,"utf-8"),this.offset+=t}else this.ensure(1);return this.buffer[this.offset++]=0,this}addString(e=""){let t=Buffer.byteLength(e);return this.ensure(t),this.buffer.write(e,this.offset),this.offset+=t,this}addString32(e=""){let t=Buffer.byteLength(e);return this.ensure(t+4),this.buffer[this.offset++]=255&t>>>24,this.buffer[this.offset++]=255&t>>>16,this.buffer[this.offset++]=255&t>>>8,this.buffer[this.offset++]=255&t>>>0,this.buffer.write(e,this.offset),this.offset+=t,this}add(e){return this.ensure(e.length),e.copy(this.buffer,this.offset),this.offset+=e.length,this}join(e){if(e){this.buffer[0]=e;const t=this.offset-1;this.buffer.writeInt32BE(t,1)}return this.buffer.slice(e?0:5,this.offset)}flush(e){let t=this.join(e);return this.offset=5,this.buffer.length>8192&&(this.buffer=Buffer.allocUnsafeSlow(this.size)),t}},e.exports=t},__r.C[2]=(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.serialize=void 0;const s=__r(5),r=new s.Writer,a=[],n=new s.Writer,i=Buffer.from([69,0,0,0,9,0,0,0,0,0]),o=(e,t)=>{const s=4+Buffer.byteLength(t)+1,r=Buffer.allocUnsafeSlow(1+s);return r[0]=e,r.writeInt32BE(s,1),r.write(t,5,"utf-8"),r[s]=0,r},f=Buffer.from(r.addCString("P").flush(68)),h=Buffer.from(r.addCString("S").flush(68)),u=e=>Buffer.from([e,0,0,0,4]),c=u(72),l=u(83),d=u(88),p=u(99);t.serialize={startup:e=>{r.addInt16(3).addInt16(0);for(const t of Object.keys(e))r.addCString(t).addCString(e[t]);r.addCString("client_encoding").addCString("UTF8");let t=r.addCString("").flush(),a=t.length+4;return(new s.Writer).addInt32(a).add(t).flush()},password:e=>r.addCString(e).flush(112),requestSsl:()=>{const e=Buffer.allocUnsafeSlow(8);return e.writeInt32BE(8,0),e.writeInt32BE(80877103,4),e},sendSCRAMClientFinalMessage:function(e){return r.addString(e).flush(112)},query:e=>r.addCString(e).flush(81),parse:e=>{const t=e.name||"";63<t.length&&(console.error("Warning! Postgres only supports 63 characters for query names."),console.error("You supplied %s (%s)",t,t.length),console.error("This can cause conflicts and silent errors executing queries"));const s=e.types||a;let n=s.length,i=r.addCString(t).addCString(e.text).addInt16(n);for(let e=0;e<n;e++)i.addInt32(s[e]);return r.flush(80)},bind:(e={})=>{const t=e.portal||"",s=e.statement||"",i=e.binary||!1,o=e.values||a,f=o.length;return r.addCString(t).addCString(s),r.addInt16(f),function(e,t){for(let s=0;s<e.length;s++){const a=t?t(e[s],s):e[s];null==a?(r.addInt16(0),n.addInt32(-1)):a instanceof Buffer?(r.addInt16(1),n.addInt32(a.length),n.add(a)):(r.addInt16(0),n.addString32(a))}}(o,e.valueMapper),r.addInt16(f),r.add(n.flush()),r.addInt16(i?1:0),r.flush(66)},execute:e=>{if(!e||!e.portal&&!e.rows)return i;const t=e.portal||"",s=e.rows||0,r=Buffer.byteLength(t),a=4+r+1+4,n=Buffer.allocUnsafeSlow(1+a);return n[0]=69,n.writeInt32BE(a,1),n.write(t,5,"utf-8"),n[r+5]=0,n.writeUInt32BE(s,n.length-4),n},describe:e=>e.name?o(68,`${e.type}${e.name||""}`):"P"===e.type?f:h,close:e=>{const t=`${e.type}${e.name||""}`;return o(67,t)},flush:()=>c,sync:()=>l,end:()=>d,copyData:e=>r.add(e).flush(100),copyDone:()=>p,copyFail:e=>o(102,e),cancel:(e,t)=>{const s=Buffer.allocUnsafeSlow(16);return s.writeInt32BE(16,0),s.writeInt16BE(1234,4),s.writeInt16BE(5678,6),s.writeInt32BE(e,8),s.writeInt32BE(t,12),s}},e.exports=t},Object.defineProperty(exports,"__esModule",{value:!0}),exports.DatabaseError=exports.serialize=exports.parse=void 0;const messages_1=__r(1);Object.defineProperty(exports,"DatabaseError",{enumerable:!0,get:function(){return messages_1.DatabaseError}});const serializer_1=__r(2);Object.defineProperty(exports,"serialize",{enumerable:!0,get:function(){return serializer_1.serialize}});const parser_1=__r(3);function parse(e,t){const s=new parser_1.Parser;return e.on("data",e=>s.parse(e,t)),new Promise(t=>e.on("end",()=>t()))}exports.parse=parse;